import{r as m,x as v,j as e,Q as y,J as w}from"./app-DUW5OUaH.js";import{S as k}from"./Sidebar-DuZklKJl.js";import{I as j}from"./InputError-BJug29P-.js";import{I as b}from"./InputLabel-D-lxP4e5.js";import{P as N}from"./PrimaryButton-QEToELCQ.js";import{T as C}from"./TextInput-C5eAOg6Q.js";import{P as M}from"./Pagination-DHSM-FPo.js";function A(){const{flash:s}=w().props,[i,t]=m.useState(!!(s.success||s.error)),[n,a]=m.useState(100);return m.useEffect(()=>{let o,d;if(s.success||s.error){t(!0),a(100);let r=100;d=setInterval(()=>{r-=2,a(r),r<=0&&clearInterval(d)},60),o=setTimeout(()=>t(!1),3e3)}return()=>{clearTimeout(o),clearInterval(d)}},[s.success,s.error]),i?e.jsxs("div",{className:`fixed top-6 right-6 z-50 min-w-[260px] px-6 py-3 rounded shadow-lg text-white flex items-center gap-3 transition
            ${s.success?"bg-green-600":"bg-red-600"}`,children:[e.jsx("span",{className:"text-2xl",children:s.success?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("span",{className:"flex-1",children:s.success||s.error}),e.jsx("span",{className:"absolute left-0 bottom-0 h-1 rounded-b bg-white/60 transition-all",style:{width:`${n}%`}})]}):null}const L=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),S=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),I=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),B=({isOpen:s,onClose:i,agendaToEdit:t})=>{const{data:n,setData:a,post:o,processing:d,errors:r,reset:x}=v({name:"",description:"",image:null,_method:"POST"}),u=!!t,[g,h]=m.useState(null);m.useEffect(()=>{u?(a({name:t.name,description:t.description||"",image:null,_method:"PUT"}),h(t.image_path?`/storage/${t.image_path}`:null)):(x(),h(null))},[t,s]);const p=c=>{const l=c.target.files[0];a("image",l),l&&h(URL.createObjectURL(l))},f=c=>{c.preventDefault();const l=u?route("admin.agendas.update",t.id):route("admin.agendas.store");o(l,{onSuccess:()=>{x(),i()},forceFormData:!0})};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:u?"Edit Agenda":"Buat Agenda Baru"}),e.jsx("button",{onClick:i,children:e.jsx(I,{})})]}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"name",value:"Nama Agenda"}),e.jsx(C,{id:"name",value:n.name,onChange:c=>a("name",c.target.value),required:!0,className:"mt-1 block w-full"}),e.jsx(j,{message:r.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"description",value:"Deskripsi"}),e.jsx("textarea",{id:"description",value:n.description,onChange:c=>a("description",c.target.value),className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm h-32"}),e.jsx(j,{message:r.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"image",value:"Gambar"}),e.jsx("input",{id:"image",type:"file",onChange:p,className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-primary hover:file:bg-blue-100"}),e.jsx(j,{message:r.image,className:"mt-2"}),g&&e.jsx("img",{src:g,alt:"Preview",className:"mt-4 h-40 w-auto object-cover rounded-md"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 rounded-lg text-gray-600 bg-gray-200 hover:bg-gray-300",children:"Batal"}),e.jsx(N,{disabled:d,children:d?"Menyimpan...":"Simpan"})]})]})]})}):null},P=({isOpen:s,onClose:i,onConfirm:t,processing:n,itemName:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 text-left",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Konfirmasi Hapus"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Apakah Anda yakin ingin menghapus agenda: ",e.jsx("br",{}),e.jsxs("span",{className:"font-medium text-gray-800",children:['"',a,'"']}),"?",e.jsx("br",{}),e.jsx("br",{}),"Tindakan ini tidak dapat dibatalkan."]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:i,disabled:n,className:"px-4 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 font-medium disabled:opacity-50",children:"Batal"}),e.jsx(N,{onClick:t,className:"bg-red-600 hover:bg-red-700 focus:bg-red-700 active:bg-red-800 focus:ring-red-500",disabled:n,children:n?"Menghapus...":"Ya, Hapus"})]})]})}):null,D=({agenda:s,onEdit:i,onDelete:t})=>{var a,o;const n=s.image_path?`/storage/${s.image_path}`:"https://via.placeholder.com/400x200.png?text=Arcadia";return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden flex flex-col",children:[e.jsx("img",{src:n,alt:s.name,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3 flex-grow",children:[(a=s.description)==null?void 0:a.substring(0,100),((o=s.description)==null?void 0:o.length)>100?"...":""]}),e.jsxs("div",{className:"mt-auto flex justify-end gap-3 pt-3 border-t",children:[e.jsx("button",{onClick:()=>i(s),className:"text-sm font-medium text-blue-600 hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>t(s),className:"text-sm font-medium text-red-600 hover:text-red-800",children:"Hapus"})]})]})]})};function H({agendas:s}){const[i,t]=m.useState(!1),[n,a]=m.useState(!1),[o,d]=m.useState(null),[r,x]=m.useState(null),{delete:u,processing:g}=v(),h=l=>{d(l),a(!0)},p=()=>{d(null),a(!0)},f=l=>{x(l)},c=()=>{r&&u(route("admin.agendas.destroy",r.id),{preserveScroll:!0,onSuccess:()=>x(null)})};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(y,{title:"Manajemen Agenda"}),e.jsx(A,{}),e.jsx(k,{isOpen:i,setIsOpen:t}),e.jsx(B,{isOpen:n,onClose:()=>a(!1),agendaToEdit:o}),e.jsx(P,{isOpen:!!r,onClose:()=>x(null),onConfirm:c,processing:g,itemName:r==null?void 0:r.name}),e.jsxs("div",{className:"lg:ml-72",children:[e.jsxs("header",{className:"bg-white shadow-sm p-4 flex items-center justify-between sticky top-0 z-20",children:[e.jsx("button",{onClick:()=>t(!0),className:"lg:hidden text-gray-600",children:e.jsx(L,{})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Manajemen Agenda"}),e.jsxs("button",{onClick:p,className:"inline-flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-800 transition",children:[e.jsx(S,{}),e.jsx("span",{children:"Tambah Agenda"})]})]}),e.jsx("main",{className:"p-6",children:s.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:s.data.map(l=>e.jsx(D,{agenda:l,onEdit:h,onDelete:f},l.id))}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx(M,{links:s.links})})]}):e.jsxs("div",{className:"text-center py-16 bg-white rounded-lg shadow",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"Belum Ada Agenda"}),e.jsx("p",{className:"text-gray-500 mt-2",children:'Klik tombol "Tambah Agenda" untuk menambahkan data pertama Anda.'})]})})]})]})}export{H as default};
