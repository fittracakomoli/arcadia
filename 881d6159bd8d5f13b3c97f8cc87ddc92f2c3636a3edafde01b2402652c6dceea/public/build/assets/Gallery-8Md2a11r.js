import{r as d,x as b,j as e,Q as y,J as N}from"./app-Bb_YB-qI.js";import{S as w}from"./Sidebar-CehbagDB.js";import{I as p}from"./InputError-UPtD6b5E.js";import{I as f}from"./InputLabel-CFMit4WO.js";import{P as v}from"./PrimaryButton-B9s0Nmr8.js";import{T as j}from"./TextInput-D8yoeMYV.js";function k(){const{flash:s}=N().props,[c,n]=d.useState(!!(s.success||s.error)),[a,r]=d.useState(100);return d.useEffect(()=>{let o,l;if(s.success||s.error){n(!0),r(100);let m=100;l=setInterval(()=>{m-=2,r(m),m<=0&&clearInterval(l)},60),o=setTimeout(()=>n(!1),3e3)}return()=>{clearTimeout(o),clearInterval(l)}},[s.success,s.error]),c?e.jsxs("div",{className:`fixed top-6 right-6 z-50 min-w-[260px] px-6 py-3 rounded shadow-lg text-white flex items-center gap-3 transition
            ${s.success?"bg-green-600":"bg-red-600"}`,children:[e.jsx("span",{className:"text-2xl",children:s.success?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("span",{className:"flex-1",children:s.success||s.error}),e.jsx("span",{className:"absolute left-0 bottom-0 h-1 rounded-b bg-white/60 transition-all",style:{width:`${a}%`}})]}):null}const C=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),M=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),L=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),I=()=>e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),S=({isOpen:s,onClose:c})=>{const{data:n,setData:a,post:r,processing:o,errors:l,reset:m}=b({category:"",caption:"",image:null}),[u,x]=d.useState(null);d.useEffect(()=>{s||(m(),x(null))},[s]);const h=t=>{const i=t.target.files[0];a("image",i),i&&x(URL.createObjectURL(i))},g=t=>{t.preventDefault(),r(route("admin.gallery.store"),{onSuccess:()=>c()})};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Upload Foto Baru"}),e.jsx("button",{onClick:c,children:e.jsx(L,{})})]}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"category",value:"Kategori"}),e.jsx(j,{id:"category",value:n.category,onChange:t=>a("category",t.target.value),required:!0,className:"mt-1 block w-full",placeholder:"Contoh: Kegiatan, Rapat, dll."}),e.jsx(p,{message:l.category,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"caption",value:"Keterangan (Opsional)"}),e.jsx(j,{id:"caption",value:n.caption,onChange:t=>a("caption",t.target.value),className:"mt-1 block w-full"}),e.jsx(p,{message:l.caption,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"image",value:"File Gambar"}),e.jsx("input",{id:"image",type:"file",onChange:h,required:!0,className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-primary hover:file:bg-blue-100"}),e.jsx(p,{message:l.image,className:"mt-2"}),u&&e.jsx("img",{src:u,alt:"Preview",className:"mt-4 h-40 w-auto object-cover rounded-md"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded-lg text-gray-600 bg-gray-200 hover:bg-gray-300",children:"Batal"}),e.jsx(v,{disabled:o,children:o?"Mengunggah...":"Upload"})]})]})]})}):null},B=({isOpen:s,onClose:c,onConfirm:n,processing:a,item:r})=>s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 text-left",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Konfirmasi Hapus"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Apakah Anda yakin ingin menghapus foto ini?"}),e.jsx("img",{src:`/storage/${r==null?void 0:r.image_path}`,alt:"Konfirmasi hapus",className:"mt-4 h-40 w-auto object-cover rounded-md mx-auto"}),e.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:c,disabled:a,className:"px-4 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 font-medium",children:"Batal"}),e.jsx(v,{onClick:n,className:"bg-red-600 hover:bg-red-700 focus:bg-red-700 active:bg-red-800 focus:ring-red-500",disabled:a,children:a?"Menghapus...":"Ya, Hapus"})]})]})}):null;function K({galleries:s}){const[c,n]=d.useState(!1),[a,r]=d.useState(!1),[o,l]=d.useState(null),{delete:m,processing:u}=b(),x=t=>{l(t)},h=()=>{o&&m(route("admin.gallery.destroy",o.id),{preserveScroll:!0,onSuccess:()=>l(null)})},g=Object.keys(s);return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(y,{title:"Manajemen Galeri"}),e.jsx(k,{}),e.jsx(w,{isOpen:c,setIsOpen:n}),e.jsx(S,{isOpen:a,onClose:()=>r(!1)}),e.jsx(B,{isOpen:!!o,onClose:()=>l(null),onConfirm:h,processing:u,item:o}),e.jsxs("div",{className:"lg:ml-72",children:[e.jsxs("header",{className:"bg-white shadow-sm p-4 flex items-center justify-between sticky top-0 z-20",children:[e.jsx("button",{onClick:()=>n(!0),className:"lg:hidden text-gray-600",children:e.jsx(C,{})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Manajemen Galeri"}),e.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-800 transition",children:[e.jsx(M,{}),e.jsx("span",{children:"Upload Foto"})]})]}),e.jsx("main",{className:"p-6",children:g.length>0?e.jsx("div",{className:"space-y-10",children:g.map(t=>e.jsxs("section",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-primary",children:t}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:s[t].map(i=>e.jsxs("div",{className:"relative group rounded-lg overflow-hidden shadow-lg",children:[e.jsx("img",{src:`/storage/${i.image_path}`,alt:i.caption||"",className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300 flex items-center justify-center",children:e.jsx("button",{onClick:()=>x(i),className:"p-2 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transform scale-50 group-hover:scale-100 transition-all duration-300",children:e.jsx(I,{})})}),i.caption&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/70 to-transparent",children:e.jsx("p",{className:"text-white text-xs truncate",children:i.caption})})]},i.id))})]},t))}):e.jsxs("div",{className:"text-center py-16 bg-white rounded-lg shadow",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"Galeri Masih Kosong"}),e.jsx("p",{className:"text-gray-500 mt-2",children:'Klik tombol "Upload Foto" untuk menambahkan gambar pertama Anda.'})]})})]})]})}export{K as default};
