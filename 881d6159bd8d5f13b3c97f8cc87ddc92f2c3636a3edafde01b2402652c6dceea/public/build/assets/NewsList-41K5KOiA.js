import{r as d,x as N,j as e,Q as k,J as w}from"./app-D-ZSkWvx.js";import{S as B}from"./Sidebar-CSTQ5vxK.js";import{I as p}from"./InputError-d9Q3Dtwt.js";import{I as f}from"./InputLabel-DzPcdDzx.js";import{P as y}from"./PrimaryButton-CSJCuIaW.js";import{T as v}from"./TextInput-5QjMouHz.js";import{P as C}from"./Pagination-DySmd2m_.js";function M(){const{flash:t}=w().props,[n,s]=d.useState(!!(t.success||t.error)),[l,r]=d.useState(100);return d.useEffect(()=>{let m,c;if(t.success||t.error){s(!0),r(100);let a=100;c=setInterval(()=>{a-=2,r(a),a<=0&&clearInterval(c)},60),m=setTimeout(()=>s(!1),3e3)}return()=>{clearTimeout(m),clearInterval(c)}},[t.success,t.error]),n?e.jsxs("div",{className:`fixed top-6 right-6 z-50 min-w-[260px] px-6 py-3 rounded shadow-lg text-white flex items-center gap-3 transition
            ${t.success?"bg-green-600":"bg-red-600"}`,children:[e.jsx("span",{className:"text-2xl",children:t.success?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("span",{className:"flex-1",children:t.success||t.error}),e.jsx("span",{className:"absolute left-0 bottom-0 h-1 rounded-b bg-white/60 transition-all",style:{width:`${l}%`}})]}):null}const S=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),L=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),F=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),P=({isOpen:t,onClose:n,newsToEdit:s})=>{const{data:l,setData:r,post:m,processing:c,errors:a,reset:u}=N({title:"",content:"",category:"",image:null,_method:"POST"}),x=!!s,[g,h]=d.useState(null);d.useEffect(()=>{x?(r({title:s.title,content:s.content,category:s.category,image:null,_method:"PATCH"}),h(s.image_path?`/storage/${s.image_path}`:null)):(u(),h(null))},[s,t]);const j=o=>{const i=o.target.files[0];r("image",i),i&&h(URL.createObjectURL(i))},b=o=>{o.preventDefault();const i=x?route("admin.news.update",s.id):route("admin.news.store");m(i,{onSuccess:()=>{u(),n()},forceFormData:!0})};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:x?"Edit Berita":"Buat Berita Baru"}),e.jsx("button",{onClick:n,children:e.jsx(F,{})})]}),e.jsxs("form",{onSubmit:b,className:"p-6 space-y-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"title",value:"Judul Berita"}),e.jsx(v,{id:"title",value:l.title,onChange:o=>r("title",o.target.value),required:!0,className:"mt-1 block w-full"}),e.jsx(p,{message:a.title,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"category",value:"Kategori"}),e.jsx(v,{id:"category",value:l.category,onChange:o=>r("category",o.target.value),required:!0,className:"mt-1 block w-full"}),e.jsx(p,{message:a.category,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"content",value:"Isi Berita"}),e.jsx("textarea",{id:"content",value:l.content,onChange:o=>r("content",o.target.value),required:!0,className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm h-40"}),e.jsx(p,{message:a.content,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"image",value:"Gambar Sampul"}),e.jsx("input",{id:"image",type:"file",onChange:j,className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-primary hover:file:bg-blue-100"}),e.jsx(p,{message:a.image,className:"mt-2"}),g&&e.jsx("img",{src:g,alt:"Preview",className:"mt-4 h-40 w-auto object-cover rounded-md"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg text-gray-600 bg-gray-200 hover:bg-gray-300",children:"Batal"}),e.jsx(y,{disabled:c,children:c?"Menyimpan...":"Simpan"})]})]})]})}):null},D=({isOpen:t,onClose:n,onConfirm:s,processing:l,itemName:r})=>t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 text-left",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Konfirmasi Hapus"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Apakah Anda yakin ingin menghapus berita: ",e.jsx("br",{}),e.jsxs("span",{className:"font-medium text-gray-800",children:['"',r,'"']}),"?",e.jsx("br",{}),e.jsx("br",{}),"Tindakan ini tidak dapat dibatalkan."]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:n,disabled:l,className:"px-4 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 font-medium disabled:opacity-50",children:"Batal"}),e.jsx(y,{onClick:s,className:"bg-red-600 hover:bg-red-700 focus:bg-red-700 active:bg-red-800 focus:ring-red-500",disabled:l,children:l?"Menghapus...":"Ya, Hapus"})]})]})}):null,I=({newsItem:t,onEdit:n,onDelete:s})=>{const l=t.image_path?`/storage/${t.image_path}`:`https://ui-avatars.com/api/?name=${encodeURIComponent(t.title)}&background=EBF4FF&color=1E40AF&size=400`;return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden flex flex-col",children:[e.jsx("img",{src:l,alt:`Gambar untuk ${t.title}`,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"inline-block bg-blue-100 text-primary text-xs font-semibold px-2.5 py-1 rounded-full mb-2",children:t.category}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2 line-clamp-2 h-14",children:t.title})]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-auto pt-3 border-t",children:[e.jsxs("p",{children:["Penulis: ",t.user.name]}),e.jsxs("p",{children:["Terbit:"," ",new Date(t.published_at).toLocaleDateString("id-ID")]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>n(t),className:"text-sm font-medium text-blue-600 hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>s(t),className:"text-sm font-medium text-red-600 hover:text-red-800",children:"Hapus"})]})]})]})};function W({news:t}){const[n,s]=d.useState(!1),[l,r]=d.useState(!1),[m,c]=d.useState(null),[a,u]=d.useState(null),{delete:x,processing:g}=N(),h=i=>{c(i),r(!0)},j=()=>{c(null),r(!0)},b=i=>{u(i)},o=()=>{a&&x(route("admin.news.destroy",a.id),{preserveScroll:!0,onSuccess:()=>u(null)})};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(k,{title:"Manajemen Berita"}),e.jsx(M,{}),e.jsx(B,{isOpen:n,setIsOpen:s}),e.jsx(P,{isOpen:l,onClose:()=>r(!1),newsToEdit:m}),e.jsx(D,{isOpen:!!a,onClose:()=>u(null),onConfirm:o,processing:g,itemName:a==null?void 0:a.title}),e.jsxs("div",{className:"lg:ml-72",children:[e.jsxs("header",{className:"bg-white shadow-sm p-4 flex items-center justify-between sticky top-0 z-20",children:[e.jsx("button",{onClick:()=>s(!0),className:"lg:hidden text-gray-600",children:e.jsx(S,{})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Manajemen Berita"}),e.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-800 transition",children:[e.jsx(L,{}),e.jsx("span",{children:"Buat Berita"})]})]}),e.jsx("main",{className:"p-6",children:t.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.data.map(i=>e.jsx(I,{newsItem:i,onEdit:h,onDelete:b},i.id))}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx(C,{links:t.links})})]}):e.jsxs("div",{className:"text-center py-16 bg-white rounded-lg shadow",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"Belum Ada Berita"}),e.jsx("p",{className:"text-gray-500 mt-2",children:'Klik tombol "Buat Berita" untuk menambahkan berita pertama Anda.'})]})})]})]})}export{W as default};
