import{r as x,x as N,j as e,Q as w,J as y}from"./app-G0PA60nU.js";import{S as C}from"./Sidebar-BxbXNfS0.js";import{I as g}from"./InputError-a9uIKkHS.js";import{I as p}from"./InputLabel-BQhnlx50.js";import{P as k}from"./PrimaryButton-B1A8tNXe.js";import{T as v}from"./TextInput-DTXkX0eQ.js";import{P as _}from"./Pagination-D9bHKvaV.js";function M(){const{flash:s}=y().props,[d,t]=x.useState(!!(s.success||s.error)),[n,r]=x.useState(100);return x.useEffect(()=>{let c,l;if(s.success||s.error){t(!0),r(100);let a=100;l=setInterval(()=>{a-=2,r(a),a<=0&&clearInterval(l)},60),c=setTimeout(()=>t(!1),3e3)}return()=>{clearTimeout(c),clearInterval(l)}},[s.success,s.error]),d?e.jsxs("div",{className:`fixed top-6 right-6 z-50 min-w-[260px] px-6 py-3 rounded shadow-lg text-white flex items-center gap-3 transition
            ${s.success?"bg-green-600":"bg-red-600"}`,children:[e.jsx("span",{className:"text-2xl",children:s.success?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("span",{className:"flex-1",children:s.success||s.error}),e.jsx("span",{className:"absolute left-0 bottom-0 h-1 rounded-b bg-white/60 transition-all",style:{width:`${n}%`}})]}):null}const L=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),P=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),S=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),D=({isOpen:s,onClose:d,activityToEdit:t})=>{const{data:n,setData:r,post:c,processing:l,errors:a,reset:m}=N({name:"",description:"",start_date:"",end_date:"",image:null,_method:"POST"}),u=!!t,[j,h]=x.useState(null);x.useEffect(()=>{u?(r({name:t.name,description:t.description,start_date:t.start_date,end_date:t.end_date||"",image:null,_method:"PUT"}),h(t.image_path?`/storage/${t.image_path}`:null)):(m(),h(null))},[t,s]);const f=o=>{const i=o.target.files[0];r("image",i),i&&h(URL.createObjectURL(i))},b=o=>{o.preventDefault();const i=u?route("admin.activities.update",t.id):route("admin.activities.store");c(i,{onSuccess:()=>{m(),d()},forceFormData:!0})};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:u?"Edit Program Kerja":"Buat Program Kerja Baru"}),e.jsx("button",{onClick:d,children:e.jsx(S,{})})]}),e.jsxs("form",{onSubmit:b,className:"p-6 space-y-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"name",value:"Nama Program Kerja"}),e.jsx(v,{id:"name",value:n.name,onChange:o=>r("name",o.target.value),required:!0,className:"mt-1 block w-full"}),e.jsx(g,{message:a.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"description",value:"Deskripsi"}),e.jsx("textarea",{id:"description",value:n.description,onChange:o=>r("description",o.target.value),className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm h-32"}),e.jsx(g,{message:a.description,className:"mt-2"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(p,{htmlFor:"start_date",value:"Tanggal Mulai"}),e.jsx(v,{type:"date",id:"start_date",value:n.start_date,onChange:o=>r("start_date",o.target.value),required:!0,className:"mt-1 block w-full"}),e.jsx(g,{message:a.start_date,className:"mt-2"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(p,{htmlFor:"end_date",value:"Tanggal Berakhir (Opsional)"}),e.jsx(v,{type:"date",id:"end_date",value:n.end_date,onChange:o=>r("end_date",o.target.value),className:"mt-1 block w-full"}),e.jsx(g,{message:a.end_date,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"image",value:"Gambar"}),e.jsx("input",{id:"image",type:"file",onChange:f,className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-primary hover:file:bg-blue-100"}),e.jsx(g,{message:a.image,className:"mt-2"}),j&&e.jsx("img",{src:j,alt:"Preview",className:"mt-4 h-40 w-auto object-cover rounded-md"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 rounded-lg text-gray-600 bg-gray-200 hover:bg-gray-300",children:"Batal"}),e.jsx(k,{disabled:l,children:l?"Menyimpan...":"Simpan"})]})]})]})}):null},I=({isOpen:s,onClose:d,onConfirm:t,processing:n,itemName:r})=>s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 text-left",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Konfirmasi Hapus"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Apakah Anda yakin ingin menghapus program kerja: ",e.jsx("br",{}),e.jsxs("span",{className:"font-medium text-gray-800",children:['"',r,'"']}),"?",e.jsx("br",{}),e.jsx("br",{}),"Tindakan ini tidak dapat dibatalkan."]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:d,disabled:n,className:"px-4 py-2 rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 font-medium disabled:opacity-50",children:"Batal"}),e.jsx(k,{onClick:t,className:"bg-red-600 hover:bg-red-700 focus:bg-red-700 active:bg-red-800 focus:ring-red-500",disabled:n,children:n?"Menghapus...":"Ya, Hapus"})]})]})}):null,B=({activity:s,onEdit:d,onDelete:t})=>{const n=(c,l)=>{const a={year:"numeric",month:"long",day:"numeric"},m=new Date(c).toLocaleDateString("id-ID",a);if(l&&l!==c){const u=new Date(l).toLocaleDateString("id-ID",a);return`${m} - ${u}`}return m},r=s.image_path?`/storage/${s.image_path}`:"https://via.placeholder.com/400x200.png?text=Arcadia";return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden flex flex-col",children:[e.jsx("img",{src:r,alt:s.name,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:n(s.start_date,s.end_date)}),e.jsxs("div",{className:"mt-auto flex justify-end gap-3 pt-3 border-t",children:[e.jsx("button",{onClick:()=>d(s),className:"text-sm font-medium text-blue-600 hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>t(s),className:"text-sm font-medium text-red-600 hover:text-red-800",children:"Hapus"})]})]})]})};function z({activities:s}){const[d,t]=x.useState(!1),[n,r]=x.useState(!1),[c,l]=x.useState(null),[a,m]=x.useState(null),{delete:u,processing:j}=N(),h=i=>{l(i),r(!0)},f=()=>{l(null),r(!0)},b=i=>{m(i)},o=()=>{a&&u(route("admin.activities.destroy",a.id),{preserveScroll:!0,onSuccess:()=>m(null)})};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(w,{title:"Manajemen Program Kerja"}),e.jsx(M,{}),e.jsx(C,{isOpen:d,setIsOpen:t}),e.jsx(D,{isOpen:n,onClose:()=>r(!1),activityToEdit:c}),e.jsx(I,{isOpen:!!a,onClose:()=>m(null),onConfirm:o,processing:j,itemName:a==null?void 0:a.name}),e.jsxs("div",{className:"lg:ml-72",children:[e.jsxs("header",{className:"bg-white shadow-sm p-4 flex items-center justify-between sticky top-0 z-20",children:[e.jsx("button",{onClick:()=>t(!0),className:"lg:hidden text-gray-600",children:e.jsx(L,{})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Manajemen Program Kerja"}),e.jsxs("button",{onClick:f,className:"inline-flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-800 transition",children:[e.jsx(P,{}),e.jsx("span",{children:"Tambah Proker"})]})]}),e.jsx("main",{className:"p-6",children:s.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:s.data.map(i=>e.jsx(B,{activity:i,onEdit:h,onDelete:b},i.id))}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx(_,{links:s.links})})]}):e.jsxs("div",{className:"text-center py-16 bg-white rounded-lg shadow",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"Belum Ada Program Kerja"}),e.jsx("p",{className:"text-gray-500 mt-2",children:'Klik tombol "Tambah Proker" untuk menambahkan data pertama Anda.'})]})})]})]})}export{z as default};
