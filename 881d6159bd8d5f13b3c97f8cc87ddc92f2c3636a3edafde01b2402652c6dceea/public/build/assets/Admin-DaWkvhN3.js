import{J as b,r as u,j as e,Q as w,S as v,x as N}from"./app-CjW7mk6v.js";import{S as k}from"./Sidebar-4Ily2JhI.js";import{I as j}from"./InputError-CphyITLQ.js";import{I as h}from"./InputLabel-B6U6S9Ne.js";import{P as y}from"./PrimaryButton-BCKc24mb.js";import{T as f}from"./TextInput-Z0TH3IkR.js";function M(){const{flash:s}=b().props,[l,r]=u.useState(!!(s.success||s.error)),[o,t]=u.useState(100);return u.useEffect(()=>{let d,m;if(s.success||s.error){r(!0),t(100);let i=100;m=setInterval(()=>{i-=2,t(i),i<=0&&clearInterval(m)},60),d=setTimeout(()=>r(!1),3e3)}return()=>{clearTimeout(d),clearInterval(m)}},[s.success,s.error]),l?e.jsxs("div",{className:`fixed top-6 right-6 z-50 min-w-[260px] px-6 py-3 rounded shadow-lg text-white flex items-center gap-3 transition
            ${s.success?"bg-green-600":"bg-red-600"}`,children:[e.jsx("span",{className:"text-2xl",children:s.success?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("span",{className:"flex-1",children:s.success||s.error}),e.jsx("span",{className:"absolute left-0 bottom-0 h-1 rounded-b bg-white/60 transition-all",style:{width:`${o}%`}})]}):null}const C=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),S=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),L=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),I=({isOpen:s,onClose:l,userToEdit:r})=>{const{data:o,setData:t,post:d,patch:m,processing:i,errors:x,reset:p}=N({name:"",email:"",password:"",password_confirmation:"",role:"moderator"}),c=!!r;u.useEffect(()=>{c?t({name:r.name,email:r.email,role:r.role,password:"",password_confirmation:""}):p()},[r,s]);const a=n=>{n.preventDefault();const g=()=>{p(),l()};c?m(route("admin.users.update",r.id),{onSuccess:g}):d(route("admin.users.store"),{onSuccess:g})};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:c?"Edit Pengguna":"Tambah Pengguna Baru"}),e.jsx("button",{onClick:l,children:e.jsx(L,{})})]}),e.jsxs("form",{onSubmit:a,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"name",value:"Nama"}),e.jsx(f,{id:"name",value:o.name,onChange:n=>t("name",n.target.value),required:!0,className:"mt-1 block w-full"}),e.jsx(j,{message:x.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"email",value:"Email"}),e.jsx(f,{id:"email",type:"email",value:o.email,onChange:n=>t("email",n.target.value),required:!0,className:"mt-1 block w-full"}),e.jsx(j,{message:x.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"role",value:"Role"}),e.jsxs("select",{id:"role",value:o.role,onChange:n=>t("role",n.target.value),className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsx(j,{message:x.role,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"password",value:"Password"}),e.jsx(f,{id:"password",type:"password",value:o.password,onChange:n=>t("password",n.target.value),placeholder:c?"Kosongkan jika tidak ingin diubah":"",required:!c,className:"mt-1 block w-full"}),e.jsx(j,{message:x.password,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"password_confirmation",value:"Konfirmasi Password"}),e.jsx(f,{id:"password_confirmation",type:"password",value:o.password_confirmation,onChange:n=>t("password_confirmation",n.target.value),required:!c,className:"mt-1 block w-full"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 rounded-lg text-gray-600 bg-gray-200 hover:bg-gray-300",children:"Batal"}),e.jsx(y,{disabled:i,children:i?"Menyimpan...":"Simpan"})]})]})]})}):null};function _({users:s}){const{auth:l}=b().props,[r,o]=u.useState(!1),[t,d]=u.useState(!1),[m,i]=u.useState(null),x=a=>{i(a),d(!0)},p=()=>{i(null),d(!0)},c=a=>{window.confirm(`Apakah Anda yakin ingin menghapus ${a.name}?`)&&v.delete(route("admin.users.destroy",a.id),{preserveScroll:!0})};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(w,{title:"Manajemen Admin"}),e.jsx(M,{}),e.jsx(k,{isOpen:r,setIsOpen:o}),e.jsx(I,{isOpen:t,onClose:()=>d(!1),userToEdit:m}),e.jsxs("div",{className:"lg:ml-72",children:[e.jsxs("header",{className:"bg-white shadow-sm p-4 flex items-center justify-between sticky top-0 z-20",children:[e.jsx("button",{onClick:()=>o(!0),className:"lg:hidden text-gray-600",children:e.jsx(C,{})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Manajemen Admin"}),l.user.role==="admin"&&e.jsxs("button",{onClick:p,className:"inline-flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-800 transition",children:[e.jsx(S,{}),e.jsx("span",{children:"Tambah Admin"})]})]}),e.jsx("main",{className:"p-6",children:e.jsx("div",{className:"bg-white p-6 rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-max text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"p-4",children:"Nama"}),e.jsx("th",{className:"p-4",children:"Email"}),e.jsx("th",{className:"p-4",children:"Role"}),l.user.role==="admin"&&e.jsx("th",{className:"p-4",children:"Aksi"})]})}),e.jsx("tbody",{children:s.map(a=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-4 font-medium",children:a.name}),e.jsx("td",{className:"p-4 text-gray-600",children:a.email}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${a.role==="admin"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:a.role})}),l.user.role==="admin"&&e.jsx("td",{className:"p-4 space-x-4",children:l.user.id!==a.id?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(a),className:"text-blue-600 hover:underline font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>c(a),className:"text-red-600 hover:underline font-medium",children:"Hapus"})]}):e.jsx("span",{className:"text-gray-400",children:"-"})})]},a.id))})]})})})]})]})}export{_ as default};
