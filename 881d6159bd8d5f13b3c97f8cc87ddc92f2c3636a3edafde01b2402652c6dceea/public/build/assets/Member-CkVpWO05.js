import{r as m,x as y,j as e,Q as C,J as I}from"./app-BUwg7w8z.js";import{S as L}from"./Sidebar-B_DeTnzU.js";import{I as j}from"./InputError-EKBRkrhJ.js";import{I as x}from"./InputLabel-CKt3LU8x.js";import{P}from"./PrimaryButton-CqJfKXLE.js";import{T as f}from"./TextInput-DORglLMb.js";function _(){const{flash:s}=I().props,[c,a]=m.useState(!!(s.success||s.error)),[i,o]=m.useState(100);return m.useEffect(()=>{let u,d;if(s.success||s.error){a(!0),o(100);let r=100;d=setInterval(()=>{r-=2,o(r),r<=0&&clearInterval(d)},60),u=setTimeout(()=>a(!1),3e3)}return()=>{clearTimeout(u),clearInterval(d)}},[s.success,s.error]),c?e.jsxs("div",{className:`fixed top-6 right-6 z-50 min-w-[260px] px-6 py-3 rounded shadow-lg text-white flex items-center gap-3 transition
            ${s.success?"bg-green-600":"bg-red-600"}`,children:[e.jsx("span",{className:"text-2xl",children:s.success?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("span",{className:"flex-1",children:s.success||s.error}),e.jsx("span",{className:"absolute left-0 bottom-0 h-1 rounded-b bg-white/60 transition-all",style:{width:`${i}%`}})]}):null}const B=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),D=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),F=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),A=()=>e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"})}),O=({isOpen:s,onClose:c,memberToEdit:a})=>{const{data:i,setData:o,post:u,processing:d,errors:r,reset:k}=y({name:"",position:"",division:"",period:new Date().getFullYear().toString(),photo:null,social_media:[{platform:"Instagram",url:""}],_method:"POST"}),p=!!a,[v,g]=m.useState(null);m.useEffect(()=>{s&&(p?(o({name:a.name,position:a.position,division:a.division,period:a.period,photo:null,social_media:a.social_media||[{platform:"Instagram",url:""}],_method:"PUT"}),g(a.photo_path?`/storage/${a.photo_path}`:null)):(k(),g(null)))},[s,a]);const b=t=>{const l=t.target.files[0];o("photo",l),l&&g(URL.createObjectURL(l))},n=(t,l,h)=>{const w=[...i.social_media];w[t][l]=h,o("social_media",w)},N=()=>{o("social_media",[...i.social_media,{platform:"",url:""}])},M=t=>{o("social_media",i.social_media.filter((l,h)=>h!==t))},S=t=>{t.preventDefault();const l=p?route("admin.members.update",a.id):route("admin.members.store");u(l,{onSuccess:()=>c(),forceFormData:!0})};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:p?"Edit Anggota":"Tambah Anggota Baru"}),e.jsx("button",{onClick:c,children:e.jsx(F,{})})]}),e.jsxs("form",{onSubmit:S,className:"p-6 space-y-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",value:"Nama Lengkap"}),e.jsx(f,{id:"name",value:i.name,onChange:t=>o("name",t.target.value),required:!0,className:"mt-1 block w-full"}),e.jsx(j,{message:r.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"position",value:"Jabatan"}),e.jsx(f,{id:"position",value:i.position,onChange:t=>o("position",t.target.value),required:!0,className:"mt-1 block w-full"}),e.jsx(j,{message:r.position,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"division",value:"Divisi"}),e.jsxs("select",{name:"division",id:"division",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",value:i.division,onChange:t=>o("division",t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Pilih Divisi"}),e.jsx("option",{value:"BPH",children:"BPH"}),e.jsx("option",{value:"Sekretaris",children:"Sekretaris"}),e.jsx("option",{value:"Bendahara",children:"Bendahara"}),e.jsx("option",{value:"PSDO",children:"PSDO"}),e.jsx("option",{value:"Ekonomi Kreatif",children:"Ekonomi Kreatif"}),e.jsx("option",{value:"Internal",children:"Internal"}),e.jsx("option",{value:"Eksternal",children:"Eksternal"}),e.jsx("option",{value:"Sosial Masyarakat",children:"Sosial Masyarakat"}),e.jsx("option",{value:"Komunikasi Informasi",children:"Komunikasi Informasi"})]}),e.jsx(j,{message:r.division,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"period",value:"Periode"}),e.jsx(f,{id:"period",value:i.period,onChange:t=>o("period",t.target.value),required:!0,className:"mt-1 block w-full"}),e.jsx(j,{message:r.period,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"photo",value:"Foto"}),e.jsx("input",{id:"photo",type:"file",onChange:b,className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-primary hover:file:bg-blue-100"}),e.jsx(j,{message:r.photo,className:"mt-2"}),v&&e.jsx("img",{src:v,alt:"Preview",className:"mt-4 h-40 w-auto object-cover rounded-md"})]}),e.jsxs("div",{children:[e.jsx(x,{value:"Media Sosial"}),i.social_media.map((t,l)=>e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(f,{value:t.platform,onChange:h=>n(l,"platform",h.target.value),placeholder:"Platform (e.g., Instagram)",className:"w-1/3"}),e.jsx(f,{value:t.url,onChange:h=>n(l,"url",h.target.value),placeholder:"URL/Link",className:"flex-grow"}),e.jsx("button",{type:"button",onClick:()=>M(l),className:"p-2 text-red-500 hover:bg-red-100 rounded-full",children:e.jsx(A,{})})]},l)),e.jsx("button",{type:"button",onClick:N,className:"mt-2 text-sm text-blue-600 hover:underline",children:"+ Tambah Link"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded-lg text-gray-600 bg-gray-200 hover:bg-gray-300",children:"Batal"}),e.jsx(P,{disabled:d,children:d?"Menyimpan...":"Simpan"})]})]})]})}):null},E=({member:s,onEdit:c,onDelete:a})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 flex items-center space-x-4",children:[e.jsx("img",{src:s.photo_path?`/storage/${s.photo_path}`:"https://via.placeholder.com/80",alt:s.name,className:"w-20 h-20 rounded-full object-cover"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h4",{className:"font-bold text-lg text-primary",children:s.name}),e.jsx("p",{className:"text-gray-600",children:s.position})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>c(s),className:"text-sm font-medium text-blue-600 hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>a(s),className:"text-sm font-medium text-red-600 hover:text-red-800",children:"Hapus"})]})]});function R({members:s}){const[c,a]=m.useState(!1),[i,o]=m.useState(!1),[u,d]=m.useState(null),[r,k]=m.useState(null);y();const p=()=>{d(null),o(!0)},v=n=>{d(n),o(!0)},g=n=>k(n),b=Object.keys(s);return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(C,{title:"Manajemen Anggota"}),e.jsx(_,{}),e.jsx(L,{isOpen:c,setIsOpen:a}),e.jsx(O,{isOpen:i,onClose:()=>o(!1),memberToEdit:u}),e.jsxs("div",{className:"lg:ml-72",children:[e.jsxs("header",{className:"bg-white shadow-sm p-4 flex items-center justify-between sticky top-0 z-20",children:[e.jsx("button",{onClick:()=>a(!0),className:"lg:hidden text-gray-600",children:e.jsx(B,{})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Manajemen Anggota"}),e.jsxs("button",{onClick:p,className:"inline-flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-800 transition",children:[e.jsx(D,{}),e.jsx("span",{children:"Tambah Anggota"})]})]}),e.jsx("main",{className:"p-6",children:b.length>0?e.jsx("div",{className:"space-y-8",children:b.map(n=>e.jsxs("section",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4 pb-2 border-b-2 border-primary",children:n}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:s[n].map(N=>e.jsx(E,{member:N,onEdit:v,onDelete:g},N.id))})]},n))}):e.jsxs("div",{className:"text-center py-16 bg-white rounded-lg shadow",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"Belum Ada Anggota"}),e.jsx("p",{className:"text-gray-500 mt-2",children:'Klik tombol "Tambah Anggota" untuk menambahkan data pertama Anda.'})]})})]})]})}export{R as default};
