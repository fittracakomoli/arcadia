import{r as c,j as e,Q as p,S as x,J as m,x as j}from"./app-BpYlKQEl.js";import{S as b}from"./Sidebar-CKQW2SUP.js";import{P as f}from"./PrimaryButton-W5_2IWkZ.js";import{I as g}from"./InputLabel-bJpJgn3Q.js";import{I as y}from"./InputError-Dcm1UpoA.js";function w(){const{flash:s}=m().props,[l,r]=c.useState(!!(s.success||s.error)),[i,a]=c.useState(100);return c.useEffect(()=>{let n,t;if(s.success||s.error){r(!0),a(100);let o=100;t=setInterval(()=>{o-=2,a(o),o<=0&&clearInterval(t)},60),n=setTimeout(()=>r(!1),3e3)}return()=>{clearTimeout(n),clearInterval(t)}},[s.success,s.error]),l?e.jsxs("div",{className:`fixed top-6 right-6 z-50 min-w-[260px] px-6 py-3 rounded shadow-lg text-white flex items-center gap-3 transition
            ${s.success?"bg-green-600":"bg-red-600"}`,children:[e.jsx("span",{className:"text-2xl",children:s.success?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("span",{className:"flex-1",children:s.success||s.error}),e.jsx("span",{className:"absolute left-0 bottom-0 h-1 rounded-b bg-white/60 transition-all",style:{width:`${i}%`}})]}):null}const N=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),v=()=>e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),k=()=>e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"})}),M=({message:s,onClose:l})=>{const{data:r,setData:i,post:a,processing:n,errors:t,reset:o}=j({reply_body:""});if(!s)return null;const h=d=>{d.preventDefault(),a(route("admin.messages.reply",s.id),{onSuccess:()=>o()})},u=()=>{confirm("Apakah Anda yakin ingin menghapus pesan ini?")&&x.delete(route("admin.messages.destroy",s.id),{onSuccess:()=>l()})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-start p-4 pt-16",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold truncate",children:s.subject}),e.jsx("button",{onClick:l,children:e.jsx(v,{})})]}),e.jsxs("div",{className:"p-6 space-y-6 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Dari:"})," ",s.name," (",s.email,")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Diterima:"})," ",new Date(s.created_at).toLocaleString()]})]}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-800",children:s.body}),e.jsxs("form",{onSubmit:h,className:"pt-6 border-t",children:[e.jsx(g,{htmlFor:"reply_body",value:"Tulis Balasan",className:"font-bold text-lg"}),e.jsx("textarea",{id:"reply_body",value:r.reply_body,onChange:d=>i("reply_body",d.target.value),className:"mt-2 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm h-40",required:!0}),e.jsx(y,{message:t.reply_body,className:"mt-2"}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsx(f,{disabled:n,children:n?"Mengirim...":"Kirim Balasan"}),e.jsxs("button",{type:"button",onClick:u,className:"text-red-600 hover:text-red-800 text-sm font-medium inline-flex items-center gap-1",children:[e.jsx(k,{})," Hapus Pesan"]})]})]})]})]})})};function B({messages:s}){const[l,r]=c.useState(!1),[i,a]=c.useState(null),n=t=>{a(t),t.is_read||x.patch(route("admin.messages.update",t.id),{is_read:!0},{preserveScroll:!0})};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(p,{title:"Pesan Masuk"}),e.jsx(w,{}),e.jsx(b,{isOpen:l,setIsOpen:r}),e.jsx(M,{message:i,onClose:()=>a(null)}),e.jsxs("div",{className:"lg:ml-72",children:[e.jsxs("header",{className:"bg-white shadow-sm px-4 py-6 flex items-center justify-between sticky top-0 z-20",children:[e.jsx("button",{onClick:()=>r(!0),className:"lg:hidden text-gray-600",children:e.jsx(N,{})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Pesan Masuk"})]}),e.jsx("main",{className:"p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Pengirim"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Subjek"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Tanggal"})]})}),e.jsx("tbody",{children:s.data.map(t=>e.jsxs("tr",{onClick:()=>n(t),className:`bg-white border-b hover:bg-gray-50 cursor-pointer ${t.is_read?"":"font-bold text-gray-900"}`,children:[e.jsxs("td",{className:"px-6 py-4 flex items-center gap-2",children:[!t.is_read&&e.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full"}),t.name]}),e.jsx("td",{className:"px-6 py-4",children:t.subject}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(t.created_at).toLocaleDateString()})]},t.id))})]}),s.data.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-12",children:"Tidak ada pesan masuk."})]})})]})]})}export{B as default};
